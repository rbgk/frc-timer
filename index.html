<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>Rebuilt Match Timer</title>
        <meta name="description" content="Match timer for FRC Rebuilt to keep track of match periods" />

        <!-- PWA essentials -->
        <link rel="manifest" href="manifest.json" />
        <meta name="theme-color" content="#0d6efd" />

        <!-- iOS support -->
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="apple-mobile-web-app-title" content="My PWA" />
        <link rel="apple-touch-icon" href="icons/icon-192.png" />

        <!-- Fallback icon -->
        <link rel="icon" href="icons/icon-192.png" />

        <link rel="stylesheet" href="style.css">
        <script defer src="script.js"></script>
        <script defer src="alliance.js"></script>
    </head>
    <body id="body" onload="init()">

        <div id="info">
            <h1 id="time"></h1>
            <p>Match Time</p>
            <h1 id="duration"></h1>
            <p>Seconds Remaining</p>
            <h1 id="phase">Auto</h1>
            <p>Match Period</p>
        </div>

        <div class="controls">
            <button id="Start_btn" class="ripple" onclick="start()">Start <br><span style="text-transform: lowercase; font-size: smaller;">timer</span></button>
            <button id="Pause_btn" class="ripple" onclick="pause()">Pause <br><span style="text-transform: lowercase; font-size: smaller;">timer</span></button>

            <button id="WinAutoToggle" class="ripple">
                Win Auto?
                <br>
                <span id="WinAuto">
                    <svg id="WinAutoNo" xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#ff0000"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg>
                    <svg id="WinAutoYes" xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px" fill="#00ff00"><path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/></svg>
                </span>
            </button>

            <button id="AllianceToggle" class="ripple" onclick="chooseAlliance()">
                Alliance:
                <br>
                <span id="alliance_color">
                    Red
                </span>
            </button>
        </div>

        <button id="Reset_btn" class="ripple" onclick="reset()">
            <svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#e3e3e3"><path d="M480-80q-75 0-140.5-28T225-185q-49-49-77-114.5T120-440h60q0 125 87.5 212.5T480-140q125 0 212.5-87.5T780-440q0-125-85-212.5T485-740h-23l73 73-41 42-147-147 147-147 41 41-78 78h23q75 0 140.5 28T735-695q49 49 77 114.5T840-440q0 75-28 140.5T735-185q-49 49-114.5 77T480-80Z"/></svg>
        </button>

        <button id="Vibrate_btn" class="ripple" onclick="vibrate()">
            <svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#ffffff"><path d="M320-120q-33 0-56.5-23.5T240-200v-560q0-33 23.5-56.5T320-840h320q33 0 56.5 23.5T720-760v560q0 33-23.5 56.5T640-120H320Zm320-80v-560H320v560h320ZM480-640q17 0 28.5-11.5T520-680q0-17-11.5-28.5T480-720q-17 0-28.5 11.5T440-680q0 17 11.5 28.5T480-640ZM0-360v-240h80v240H0Zm120 80v-400h80v400h-80Zm760-80v-240h80v240h-80Zm-120 80v-400h80v400h-80Zm-440 80v-560 560Z"/></svg>
        </button>

        <div id="flashDiv"></div>
        <span id="flashToggle">
            <button id="flashOff" class="ripple">
                <svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#ffffff"><path d="M280-880h400l-80 280h160L643-431l-57-57 22-32h-54l-47-47 67-233H360v86l-80-80v-86ZM400-80v-320H280v-166L55-791l57-57 736 736-57 57-241-241L400-80Zm73-521Z"/></svg>
            </button>
            <button id="flashOn" class="ripple">
                <svg xmlns="http://www.w3.org/2000/svg" height="48px" viewBox="0 -960 960 960" width="48px" fill="#ffffff"><path d="m460-272 186-268H520l81-280H340v360h120v188ZM400-80v-320H280v-480h400l-80 280h160L400-80Zm60-380H340h120Z"/></svg>
            </button>
        </span>

        <script>
            window.addEventListener("beforeunload", (e) => {
                e.preventDefault();
                e.returnValue = ""; // required for Chrome
            });

            document.addEventListener("touchmove", e => {
                e.preventDefault();
            }, { passive: false });

        </script>
    </body>
</html>
